CPPSRC = site12.cpp
CUSRC  = site12.cu

all: $(CUSRC)
	nvcc --compiler-bindir /usr/bin/g++-4.9 -D_FORCE_INLINES -O2 -arch=sm_35 $(CUSRC) -lcudadevrt -o cuda_site
run: cuda_site
	./cuda_site 16385 100 100 10 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 250 50 107584 0 ps16k.bin obs.txt
mic: $(CPPSRC)
	icc -mmic -qopenmp -O2 $(CPPSRC) -o mic_site
	scp mic_site mic0:
soc: $(CPPSRC) $(CUSRC)
	g++ -DSEQ -O2 $(CPPSRC) -o site
	g++ -fopenmp -O2 $(CPPSRC) -o omp_site
	nvcc --compiler-bindir /usr/bin/g++-4.9 -D_FORCE_INLINES -O2 -arch=sm_35 $(CUSRC) -lcudadevrt -o cuda_site
runs: site
	./site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
runo: omp_site
	./omp_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./omp_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
runc: cuda_site
	./cuda_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 50 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 100 26896 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 100 100 50 25 429025 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
	./cuda_site 16385 200 100 50 50 107584 0 ps16k.bin obs.txt
